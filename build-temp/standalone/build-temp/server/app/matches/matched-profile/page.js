(()=>{var e={};e.id=8316,e.ids=[8316],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},32319:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(50482),a=s(69108),i=s(62563),l=s.n(i),n=s(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["matches",{children:["matched-profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7940)),"/home/subvivah/htdocs/subvivah.com/src/app/matches/matched-profile/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,36107)),"/home/subvivah/htdocs/subvivah.com/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,24117)),"/home/subvivah/htdocs/subvivah.com/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/subvivah/htdocs/subvivah.com/src/app/matches/matched-profile/page.tsx"],m="/matches/matched-profile/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/matches/matched-profile/page",pathname:"/matches/matched-profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},74791:(e,t,s)=>{Promise.resolve().then(s.bind(s,27284))},76755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(97075).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},89410:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(37412),a=s.n(r)},37412:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{getImageProps:function(){return n},default:function(){return o}});let r=s(22098),a=s(83855),i=s(31900),l=r._(s(74931)),n=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}},o=i.Image},27284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(95344),a=s(3729),i=s(89410),l=s(56506),n=s(8428),o=s(54540),c=s(76755),d=s(30473);let m=(0,o.Z)(function(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[s,o]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0),[x,f]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{(async()=>{try{if(p(!0),f(null),!t){f("Invalid search parameters");return}let s=t.get("userId");if(!s){f("No user ID provided");return}let r=await fetch("/api/auth/me"),a=await r.json();if(!a.isAuthenticated||!a.user){e.push("/login");return}let i=await fetch(`/api/profiles/${s}`);if(!i.ok){let e=await i.json();f(e.details||e.error||"Failed to fetch profile");return}let l=await i.json();if(!l||!l.user){f("Profile data is incomplete");return}o(l);let n=await fetch(`/api/spotlight?userId=${a.user.id}&all=true`);if(n.ok){let e=await n.json();if(e.matches&&e.matches.length>0){let t=e.matches.sort((e,t)=>t.matchScore-e.matchScore)[0];if(t.profile.userId===s)w(!0),h({matchScore:t.matchScore,matchingCriteria:t.matchingCriteria});else{let t=e.matches.find(e=>e.profile.userId===s);t&&h({matchScore:t.matchScore,matchingCriteria:t.matchingCriteria})}}}j(!0);try{let e=await fetch("/api/ai/match-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.user.id,matchedUserId:s})});if(e.ok){let t=await e.json();v(t)}}catch(e){console.error("Error fetching AI analysis:",e)}finally{j(!1)}}catch(e){console.error("Error:",e),f(e instanceof Error?e.message:"Failed to fetch profile")}finally{p(!1)}})()},[e,t]),u)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[r.jsx("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),r.jsx("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),r.jsx("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading matches..."})]})]});if(x)return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[r.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"No Match Found"}),r.jsx("p",{className:"text-purple-200 mb-6",children:x}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(l.default,{href:"/preferences",className:"inline-block w-full bg-purple-600 text-white px-6 py-3 rounded-md hover:bg-purple-700",children:"Update Preferences"}),r.jsx(l.default,{href:"/matches",className:"inline-block w-full border border-white/20 text-white px-6 py-3 rounded-md hover:bg-white/5",children:"Back to Matches"})]})]})});if(!s)return null;let y=new Date().getFullYear()-new Date(s.user.dob).getFullYear();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 py-12 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"20%",left:"10%"}}),r.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"60%",left:"80%"}}),r.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"80%",left:"30%"}})]}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden border border-white/20",children:[(0,r.jsxs)("div",{className:"relative h-96",children:[s.user.photos?.[0]?r.jsx(i.default,{src:s.user.photos[0].url,alt:`${s.user.firstName}'s profile`,fill:!0,className:"object-cover"}):r.jsx("div",{className:"h-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-32 h-32 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("span",{className:"text-4xl font-bold text-white",children:[s.user.firstName[0],s.user.lastName[0]]})}),r.jsx("p",{className:"text-purple-200",children:"No photo available"})]})}),N&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-yellow-400 text-indigo-900 px-4 py-2 rounded-full font-semibold flex items-center gap-2",children:[r.jsx(c.Z,{className:"w-5 h-5"}),"Best Match"]}),(0,r.jsxs)("div",{className:`absolute top-4 right-4 ${N?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-purple-600"} text-white px-4 py-2 rounded-full font-medium`,children:[m?.matchScore,"% Match"]})]}),s.user.photos&&s.user.photos.length>1&&(0,r.jsxs)("div",{className:"px-8 py-6 border-t border-white/10",children:[r.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Photo Gallery"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:s.user.photos.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-lg overflow-hidden bg-gradient-to-br from-purple-500/20 to-pink-500/20 shadow group flex flex-col",children:[r.jsx("div",{className:"relative w-full aspect-square",children:r.jsx(i.default,{src:e.url,alt:`Photo ${t+1}`,fill:!0,className:"object-cover w-full h-full group-hover:scale-105 transition-transform duration-200",sizes:"300px"})}),e.caption&&r.jsx("div",{className:"p-2 text-center bg-white/10 backdrop-blur-sm",children:r.jsx("p",{className:"text-xs text-purple-200 truncate",children:e.caption})})]},t))})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:[s.user.firstName," ",s.user.lastName,", ",y]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Matching Criteria"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:m?.matchingCriteria.map((e,t)=>r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-600/30 text-purple-200",children:e},t))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,r.jsxs)("dl",{className:"space-y-3",children:[s.height&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Height"}),r.jsx("dd",{className:"text-white",children:s.height})]}),s.weight&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Weight"}),r.jsx("dd",{className:"text-white",children:s.weight})]}),s.maritalStatus&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Marital Status"}),r.jsx("dd",{className:"text-white",children:s.maritalStatus})]}),s.religion&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Religion"}),r.jsx("dd",{className:"text-white",children:s.religion})]}),s.caste&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Caste"}),r.jsx("dd",{className:"text-white",children:s.caste})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Professional Information"}),(0,r.jsxs)("dl",{className:"space-y-3",children:[s.education&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Education"}),r.jsx("dd",{className:"text-white",children:s.education})]}),s.occupation&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Occupation"}),r.jsx("dd",{className:"text-white",children:s.occupation})]}),s.workLocation&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-purple-200",children:"Work Location"}),r.jsx("dd",{className:"text-white",children:s.workLocation})]})]})]})]}),s.aboutMe&&(0,r.jsxs)("div",{className:"mt-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"About Me"}),r.jsx("p",{className:"text-purple-200",children:s.aboutMe})]}),(0,r.jsxs)("div",{className:"mt-8 p-6 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[r.jsx(d.Z,{className:"h-5 w-5 text-purple-200"}),"AI Match Analysis"]}),b?r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-200"})}):g?r.jsx("div",{className:"prose prose-invert max-w-none",children:r.jsx("div",{className:"whitespace-pre-line text-purple-200",children:g.analysis})}):r.jsx("p",{className:"text-purple-200",children:"Unable to generate analysis at this time."})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[r.jsx(l.default,{href:"/matches",className:"px-4 py-2 border border-white/20 rounded-lg text-sm font-medium text-white hover:bg-white/5",children:"Back to Matches"}),r.jsx("button",{onClick:()=>{},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Show Interest"})]})]})]})})]})})},54540:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(95344),a=s(3729),i=s(8428);function l(e){return function(t){let[s,l]=(0,a.useState)(!0),[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);return((0,i.useRouter)(),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.isAuthenticated&&t.user?(o(!0),d(t.user)):(o(!1),d(null))}catch(e){console.error("Auth check error:",e),o(!1),d(null)}finally{l(!1)}})()},[]),s)?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[r.jsx("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),r.jsx("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),r.jsx("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]}):n&&c?r.jsx(e,{...t,user:c}):null}}},7940:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,s(86843).createProxy)(String.raw`/home/subvivah/htdocs/subvivah.com/src/app/matches/matched-profile/page.tsx`),{__esModule:a,$$typeof:i}=r,l=r.default},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,5547,337,1900,4522],()=>s(32319));module.exports=r})();