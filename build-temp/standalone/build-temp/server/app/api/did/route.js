"use strict";(()=>{var t={};t.id=6256,t.ids=[6256],t.modules={30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},90810:(t,e,a)=>{a.r(e),a.d(e,{headerHooks:()=>v,originalPathname:()=>_,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>P});var r={};a.r(r),a.d(r,{POST:()=>u});var o=a(95419),i=a(69108),s=a(99678),n=a(78070),d=a(32183);async function u(t){try{let{text:e,language:a}=await t.json(),r=await fetch(d.H.DID_API_URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${d.H.DID_API_KEY}`},body:JSON.stringify({script:{type:"text",input:e,provider:{type:"microsoft",voice_id:"en-US-JennyNeural"}},source_url:"https://storage.googleapis.com/d-id-avatars/avatar.mp4"})});if(!r.ok)throw Error("Failed to create D-ID talk");let o=(await r.json()).id,i=null,s=0;for(;!i&&s<10;){let t=await fetch(`${d.H.DID_API_URL}/${o}`,{headers:{Authorization:`Basic ${d.H.DID_API_KEY}`}});if(!t.ok)throw Error("Failed to get talk status");let e=await t.json();if("done"===e.status){i=e.result_url;break}await new Promise(t=>setTimeout(t,1e3)),s++}if(!i)throw Error("Failed to generate video URL");return n.Z.json({videoUrl:i})}catch(t){return console.error("Error in D-ID API:",t),n.Z.json({error:"Failed to generate avatar video"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/did/route",pathname:"/api/did",filename:"route",bundlePath:"app/api/did/route"},resolvedPagePath:"/home/subvivah/htdocs/subvivah.com/src/app/api/did/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:v,staticGenerationBailout:P}=p,_="/api/did/route";function m(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}},32183:(t,e,a)=>{a.d(e,{H:()=>r});let r={GPT_API_KEY:process.env.OPENAI_API_KEY||"",GPT_API_URL:"https://api.openai.com/v1/chat/completions",DID_API_KEY:"YnJhaGFtYWFuZGFpQGdtYWlsLmNvbQ:VypOHmrYDg82dlxU1bhJS",DID_API_URL:"https://api.d-id.com/talks"}}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),r=e.X(0,[1638,6206],()=>a(90810));module.exports=r})();