(()=>{var e={};e.id=2509,e.ids=[2509],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},71621:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=s(50482),a=s(69108),n=s(62563),o=s.n(n),l=s(68300),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(r,i);let c=["",{children:["preferences",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,67127)),"/home/subvivah/htdocs/subvivah.com/src/app/preferences/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,36107)),"/home/subvivah/htdocs/subvivah.com/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,24117)),"/home/subvivah/htdocs/subvivah.com/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/subvivah/htdocs/subvivah.com/src/app/preferences/page.tsx"],u="/preferences/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/preferences/page",pathname:"/preferences",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9691:(e,r,s)=>{Promise.resolve().then(s.bind(s,28830))},28830:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(95344),a=s(3729),n=s(8428);let o=(0,s(54540).Z)(function(){let e=(0,n.useRouter)(),[r,s]=(0,a.useState)({ageFrom:null,ageTo:null,heightFrom:null,heightTo:null,maritalStatus:null,religion:null,caste:null,education:null,occupation:null,location:null,income:null}),[o,l]=(0,a.useState)(!0),[i,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[m,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{l(!0);let r=await fetch("/api/auth/me");if(!r.ok){e.push("/login");return}let t=await r.json();x(t.user.id);let a=await fetch(`/api/preferences?userId=${t.user.id}`);if(a.ok){let e=await a.json();s(e)}else if(404===a.status)console.log("No preferences found - will create new ones");else throw Error("Failed to fetch preferences")}catch(e){console.error("Error fetching data:",e),u("Failed to load preferences. Please try again.")}finally{l(!1)}},v=async s=>{if(s.preventDefault(),u(null),p(null),r.ageFrom&&r.ageTo&&r.ageFrom>r.ageTo){u('Age "From" must be less than Age "To"');return}if(!m){u("User not authenticated");return}c(!0);try{let s=await fetch("/api/preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m,...r})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to save preferences");p("Preferences saved successfully!"),setTimeout(()=>{e.push("/matches")},2e3)}catch(e){console.error("Error saving preferences:",e),u(e instanceof Error?e.message:"Failed to save preferences")}finally{c(!1)}};return o?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500"})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-3xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Partner Preferences"}),d&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-sm text-red-600",children:d})}),h&&t.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:t.jsx("p",{className:"text-sm text-green-600",children:h})}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Age Range"}),(0,t.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"number",value:r.ageFrom||"",onChange:e=>s({...r,ageFrom:parseInt(e.target.value)||null}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"From"}),t.jsx("input",{type:"number",value:r.ageTo||"",onChange:e=>s({...r,ageTo:parseInt(e.target.value)||null}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"To"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Height Range"}),(0,t.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",value:r.heightFrom||"",onChange:e=>s({...r,heightFrom:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"From (e.g., 5'6)"}),t.jsx("input",{type:"text",value:r.heightTo||"",onChange:e=>s({...r,heightTo:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"To (e.g., 6'0)"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marital Status"}),(0,t.jsxs)("select",{value:r.maritalStatus||"",onChange:e=>s({...r,maritalStatus:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[t.jsx("option",{value:"",children:"Select marital status"}),t.jsx("option",{value:"never_married",children:"Never Married"}),t.jsx("option",{value:"divorced",children:"Divorced"}),t.jsx("option",{value:"widowed",children:"Widowed"}),t.jsx("option",{value:"awaiting_divorce",children:"Awaiting Divorce"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Religion"}),(0,t.jsxs)("select",{value:r.religion||"",onChange:e=>s({...r,religion:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[t.jsx("option",{value:"",children:"Select Religion"}),t.jsx("option",{value:"hindu",children:"Hindu"}),t.jsx("option",{value:"muslim",children:"Muslim"}),t.jsx("option",{value:"christian",children:"Christian"}),t.jsx("option",{value:"sikh",children:"Sikh"}),t.jsx("option",{value:"jain",children:"Jain"}),t.jsx("option",{value:"buddhist",children:"Buddhist"}),t.jsx("option",{value:"other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Caste"}),t.jsx("input",{type:"text",value:r.caste||"",onChange:e=>s({...r,caste:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"Enter preferred caste"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Education"}),(0,t.jsxs)("select",{value:r.education||"",onChange:e=>s({...r,education:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[t.jsx("option",{value:"",children:"Select Education"}),t.jsx("option",{value:"B.Tech",children:"B.Tech"}),t.jsx("option",{value:"MBBS",children:"MBBS"}),t.jsx("option",{value:"B.Com",children:"B.Com"}),t.jsx("option",{value:"BBA",children:"BBA"}),t.jsx("option",{value:"MBA",children:"MBA"}),t.jsx("option",{value:"MCA",children:"MCA"}),t.jsx("option",{value:"B.Sc",children:"B.Sc"}),t.jsx("option",{value:"M.Sc",children:"M.Sc"}),t.jsx("option",{value:"Ph.D",children:"Ph.D"}),t.jsx("option",{value:"CA",children:"CA"}),t.jsx("option",{value:"LLB",children:"LLB"}),t.jsx("option",{value:"B.Arch",children:"B.Arch"}),t.jsx("option",{value:"BDS",children:"BDS"}),t.jsx("option",{value:"B.Pharm",children:"B.Pharm"}),t.jsx("option",{value:"M.Tech",children:"M.Tech"}),t.jsx("option",{value:"high_school",children:"High School"}),t.jsx("option",{value:"any",children:"Any"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Occupation"}),t.jsx("input",{type:"text",value:r.occupation||"",onChange:e=>s({...r,occupation:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"Enter preferred occupation"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Work Location"}),t.jsx("input",{type:"text",value:r.location||"",onChange:e=>s({...r,location:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",placeholder:"Enter preferred work location"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Annual Income Range"}),(0,t.jsxs)("select",{value:r.income||"",onChange:e=>s({...r,income:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-pink-500 focus:ring-pink-500",children:[t.jsx("option",{value:"",children:"Select Income Range"}),t.jsx("option",{value:"0-3",children:"Below 3 LPA"}),t.jsx("option",{value:"3-5",children:"3-5 LPA"}),t.jsx("option",{value:"5-8",children:"5-8 LPA"}),t.jsx("option",{value:"8-12",children:"8-12 LPA"}),t.jsx("option",{value:"12-15",children:"12-15 LPA"}),t.jsx("option",{value:"15-20",children:"15-20 LPA"}),t.jsx("option",{value:"20+",children:"Above 20 LPA"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{type:"button",onClick:()=>e.push("/matches"),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 disabled:opacity-50",children:i?"Saving...":"Save Preferences"})]})]})]})})})})},54540:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var t=s(95344),a=s(3729),n=s(8428);function o(e){return function(r){let[s,o]=(0,a.useState)(!0),[l,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null);return((0,n.useRouter)(),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),r=await e.json();r.isAuthenticated&&r.user?(i(!0),d(r.user)):(i(!1),d(null))}catch(e){console.error("Auth check error:",e),i(!1),d(null)}finally{o(!1)}})()},[]),s)?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[t.jsx("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),t.jsx("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),t.jsx("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]}):l&&c?t.jsx(e,{...r,user:c}):null}}},67127:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let t=(0,s(86843).createProxy)(String.raw`/home/subvivah/htdocs/subvivah.com/src/app/preferences/page.tsx`),{__esModule:a,$$typeof:n}=t,o=t.default},73881:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});var t=s(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[1638,5547,337,4522],()=>s(71621));module.exports=t})();