(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{97430:function(e,t,r){Promise.resolve().then(r.t.bind(r,81749,23)),Promise.resolve().then(r.t.bind(r,25250,23)),Promise.resolve().then(r.bind(r,25887)),Promise.resolve().then(r.bind(r,38727))},57977:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var s=r(64090);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:h,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:i?24*Number(n)/Number(a):n,className:o("lucide",d),...!h&&!l(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:l,...c}=r;return(0,s.createElement)(d,{ref:n,iconNode:t,className:o("lucide-".concat(a(i(e))),"lucide-".concat(e),l),...c})});return r.displayName=i(e),r}},55211:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(57977).Z)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},18727:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(57977).Z)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(57977).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},47907:function(e,t,r){"use strict";var s=r(15313);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},25887:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}});var s=r(3827),a=r(64090);function n(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(""),l=async()=>{if(i.trim()){n([...r,{text:i,isUser:!0}]);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:"You are ब्रह्मांड AI, a friendly and helpful AI assistant for a matrimonial website. You should:\n                1. Be warm, empathetic, and culturally sensitive\n                2. Help users with profile creation, search filters, and account settings\n                3. Provide guidance on safety tips and best practices\n                4. Answer questions about the matrimonial process\n                5. Keep responses concise but informative\n                6. Use a mix of Hindi and English when appropriate\n                7. Always maintain a professional yet friendly tone"},...r.map(e=>({role:e.isUser?"user":"assistant",content:e.text})),{role:"user",content:i}],language:"en"})});if(!e.ok)throw Error("Failed to get response");let t=await e.json();n(e=>[...e,{text:t.response,isUser:!1}])}catch(e){console.error("Error:",e),n(e=>[...e,{text:"I apologize, but I'm having trouble connecting right now. Please try again in a moment.",isUser:!1}])}o("")}};return(0,s.jsx)("div",{className:"fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 w-full max-w-xs sm:w-80 flex justify-end",children:e?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-xs sm:w-80",children:[(0,s.jsxs)("div",{className:"bg-red-600 text-white p-4 rounded-t-lg flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,s.jsx)("span",{children:"ब्रह्मांड help"})]}),(0,s.jsx)("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"h-96 overflow-y-auto p-4 space-y-4",children:0===r.length?(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:"How can I help you today?"})}):r.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat(e.isUser?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] p-3 rounded-lg ".concat(e.isUser?"bg-red-600 text-white":"bg-gray-100 text-gray-800"),children:e.text})},t))}),(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&l(),placeholder:"Type your message...",className:"w-full border rounded-lg px-4 py-2 pr-12 focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-800"}),(0,s.jsx)("button",{onClick:l,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition duration-300",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}):(0,s.jsxs)("button",{onClick:()=>t(!0),className:"bg-red-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-red-700 transition duration-300 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,s.jsx)("span",{children:"ब्रह्मांड help"})]})})}},38727:function(e,t,r){"use strict";r.r(t);var s=r(3827),a=r(64090),n=r(18727),i=r(55211),o=r(52235),l=r(47907);let c=(e,t)=>e>=90?"Perfect match! You share many common interests and values.":e>=80?"Great match! You both match on "+t.slice(0,2).join(" and ")+"!":e>=70?"Good match! You have similar preferences in "+t[0]+".":"Potential match! Explore more to discover common interests.";t.default=()=>{var e,t,r,d,h;let u=(0,l.useRouter)(),[m,x]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!0),[j,w]=(0,a.useState)(null),[b,y]=(0,a.useState)(null),[N,k]=(0,a.useState)(0),[C,A]=(0,a.useState)([]),[S,P]=(0,a.useState)(null),[M,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{v(!0),w(null);let e=await fetch("/api/auth/me");if(!e.ok){u.push("/login");return}let t=await e.json(),r=await fetch("/api/spotlight?userId=".concat(t.user.id));if(!r.ok){let e=await r.json();"No suitable matches found"===e.error?w("No matches found based on your preferences."):w(e.details||e.error||"Failed to fetch matched profile");return}let s=await r.json();if(!s.matchedProfile){w("No matches found based on your preferences.");return}y(s.matchedProfile),k(s.matchScore),A(s.matchingCriteria),Z(!0);try{let e=await fetch("/api/ai/match-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.user.id,matchedUserId:s.matchedProfile.userId})});if(e.ok){let t=await e.json();P(t)}}catch(e){console.error("Error fetching AI analysis:",e)}finally{Z(!1)}let a=setTimeout(()=>{x(!0)},4e3);return()=>clearTimeout(a)}catch(e){console.error("Error fetching matched profile:",e),w(e instanceof Error?e.message:"Failed to fetch matched profile")}finally{v(!1)}})()},[u]);let L=()=>{m&&(p(!0),setTimeout(()=>{p(!1)},3e3)),x(!m)},E=()=>{b&&u.push("/matches/matched-profile?userId=".concat(b.userId))};if(g||j||!b)return null;let z=new Date().getFullYear()-new Date(b.user.dob).getFullYear();return null===(t=b.user.photos)||void 0===t||null===(e=t[0])||void 0===e||e.url,c(N,C),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:L,className:"fixed right-4 top-1/2 transform -translate-y-1/2 z-50 bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white rounded-full p-3 shadow-lg transition-all duration-300 hover:scale-110 hover:shadow-xl group",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5 transform group-hover:rotate-12 transition-transform duration-300",fill:"currentColor"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-white text-pink-500 text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center animate-pulse",children:"!"})]})}),f&&(0,s.jsx)("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 -translate-y-20 z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-3 border border-pink-100 animate-slide-up-fade",children:(0,s.jsxs)("p",{className:"text-xs text-gray-700 whitespace-nowrap flex items-center gap-1",children:[(0,s.jsx)(n.Z,{className:"h-3 w-3 text-pink-500 animate-spin-slow"}),(0,s.jsx)("span",{className:"bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent font-medium",children:"New match found! ✨"})]})})}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in",children:(0,s.jsxs)("div",{className:"bg-gradient-to-b from-white to-pink-50 rounded-xl shadow-xl p-5 w-[340px] relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-0 left-1/4 animate-float-heart-1",children:(0,s.jsx)(i.Z,{className:"h-4 w-4 text-pink-200/30",fill:"currentColor"})}),(0,s.jsx)("div",{className:"absolute top-1/4 right-1/4 animate-float-heart-2",children:(0,s.jsx)(i.Z,{className:"h-3 w-3 text-pink-200/30",fill:"currentColor"})}),(0,s.jsx)("div",{className:"absolute bottom-1/4 left-1/3 animate-float-heart-3",children:(0,s.jsx)(i.Z,{className:"h-5 w-5 text-pink-200/30",fill:"currentColor"})}),(0,s.jsx)("div",{className:"absolute top-1/2 right-1/3 animate-float-heart-4",children:(0,s.jsx)(i.Z,{className:"h-4 w-4 text-pink-200/30",fill:"currentColor"})}),(0,s.jsx)("div",{className:"absolute bottom-0 right-1/4 animate-float-heart-5",children:(0,s.jsx)(i.Z,{className:"h-3 w-3 text-pink-200/30",fill:"currentColor"})})]}),(0,s.jsx)("button",{onClick:L,className:"absolute -top-2 -right-2 bg-white rounded-full p-1.5 shadow-lg text-gray-600 hover:text-gray-800 transition-all duration-300 hover:scale-110 hover:rotate-90 hover:bg-pink-50 z-10 border border-gray-200",children:(0,s.jsx)(o.Z,{size:18,strokeWidth:2.5})}),(0,s.jsxs)("div",{className:"space-y-4 relative z-10",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(null===(r=b.user.photos)||void 0===r?void 0:r[0])?(0,s.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden shadow-lg hover:scale-105 transition-transform duration-300",children:(0,s.jsx)("img",{src:b.user.photos[0].url,alt:"".concat(b.user.firstName,"'s profile"),className:"w-full h-full object-cover"})}):(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-r from-pink-500 to-rose-500 flex items-center justify-center text-white text-2xl font-bold shadow-lg hover:scale-105 transition-transform duration-300",children:(d=b.user.firstName,h=b.user.lastName,"".concat(d.charAt(0)).concat(h.charAt(0)).toUpperCase())})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-gray-800",children:[b.user.firstName," ",b.user.lastName]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1.5 text-gray-600 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs",children:[z," years"]}),(0,s.jsx)("span",{className:"w-1 h-1 bg-gray-300 rounded-full"}),(0,s.jsx)("span",{className:"text-xs",children:b.occupation})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700",children:"Match Score"}),(0,s.jsxs)("span",{className:"text-xs font-bold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent",children:[N,"%"]})]}),(0,s.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-pink-500 to-rose-500 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(N,"%")}})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 justify-center",children:C.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"bg-gradient-to-r from-pink-50 to-rose-50 text-pink-600 px-2 py-0.5 rounded-full text-xs font-medium border border-pink-100",children:e},t))}),(0,s.jsxs)("div",{className:"p-3 bg-white/80 rounded-lg border border-pink-100",children:[(0,s.jsxs)("h3",{className:"text-xs font-semibold text-gray-800 mb-2 flex items-center gap-1",children:[(0,s.jsx)(n.Z,{className:"h-3 w-3 text-pink-500 animate-pulse"}),"AI Analysis"]}),M?(0,s.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-pink-500"})}):S?(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,s.jsx)("p",{className:"line-clamp-2 leading-relaxed",children:S.analysis}),(0,s.jsxs)("button",{onClick:E,className:"text-pink-600 hover:text-pink-700 text-xs font-medium flex items-center gap-1 group mt-1",children:["View full AI analysis",(0,s.jsx)("span",{className:"transform group-hover:translate-x-0.5 transition-transform duration-300",children:"→"})]})]}):(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Analysis not available"})]}),(0,s.jsxs)("div",{className:"flex space-x-2 pt-1",children:[(0,s.jsx)("button",{onClick:E,className:"flex-1 bg-gradient-to-r from-pink-500 to-rose-500 text-white py-2 rounded-lg hover:from-pink-600 hover:to-rose-600 transition-all duration-300 text-xs font-semibold shadow-sm hover:shadow-md",children:"View Profile"}),(0,s.jsx)("button",{onClick:L,className:"flex-1 bg-white text-gray-600 py-2 rounded-lg hover:bg-gray-50 transition-all duration-300 text-xs font-semibold border border-gray-200 hover:border-gray-300",children:"Skip"})]})]})]})})]})}}},function(e){e.O(0,[1749,5250,2971,8069,1744],function(){return e(e.s=97430)}),_N_E=e.O()}]);