(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{25928:function(e,t,s){Promise.resolve().then(s.bind(s,99089))},47907:function(e,t,s){"use strict";var a=s(15313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},99089:function(e,t,s){"use strict";s.r(t);var a=s(3827),n=s(64090),r=s(69574);t.default=(0,r.Z)(function(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(""),[i,o]=(0,n.useState)(!1),l=(0,n.useRef)(null);(0,n.useEffect)(()=>{c()},[e]);let c=()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},u=async e=>{if(e.preventDefault(),!s.trim()||i)return;let a={id:Date.now().toString(),content:s,role:"user",timestamp:new Date().toISOString()};t(e=>[...e,a]),r(""),o(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})});if(e.ok){let s=await e.json(),a={id:Date.now().toString(),content:s.response,role:"assistant",timestamp:new Date().toISOString()};t(e=>[...e,a])}}catch(s){console.error("Error sending message:",s);let e={id:Date.now().toString(),content:"Sorry, I encountered an error. Please try again.",role:"assistant",timestamp:new Date().toISOString()};t(t=>[...t,e])}finally{o(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"ब्रह्मांड AI Chat"}),(0,a.jsx)("p",{className:"mt-4 text-lg text-gray-600",children:"Chat with our AI assistant about relationships, astrology, and more"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("div",{className:"h-[600px] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[70%] rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),(0,a.jsx)("p",{className:"text-xs mt-1 opacity-75",children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)),i&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg px-4 py-2",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,a.jsx)("div",{ref:l})]}),(0,a.jsx)("form",{onSubmit:u,className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>r(e.target.value),placeholder:"Type your message...",className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",disabled:i}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:"Send"})]})})]})})]})})})},69574:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(3827),n=s(64090),r=s(47907);function i(e){return function(t){let[s,i]=(0,n.useState)(!0),[o,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null);return((0,r.useRouter)(),(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.isAuthenticated&&t.user?(l(!0),u(t.user)):(l(!1),u(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup())}catch(e){console.error("Auth check error:",e),l(!1),u(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup()}finally{i(!1)}})()},[]),s)?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[(0,a.jsx)("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),(0,a.jsx)("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),(0,a.jsx)("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]}):o&&c?(0,a.jsx)(e,{...t,user:c}):null}}}},function(e){e.O(0,[2971,8069,1744],function(){return e(e.s=25928)}),_N_E=e.O()}]);