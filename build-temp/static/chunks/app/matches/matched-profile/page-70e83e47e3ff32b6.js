(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8316],{4766:function(e,t,s){Promise.resolve().then(s.bind(s,4536))},57977:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(64090);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:u,iconNode:h,...m}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",d),...!u&&!c(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:c,...o}=s;return(0,r.createElement)(d,{ref:i,iconNode:t,className:n("lucide-".concat(a(l(e))),"lucide-".concat(e),c),...o})});return s.displayName=l(e),s}},18727:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(57977).Z)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},75879:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(57977).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},20703:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(67447),a=s.n(r)},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(25250),a=s.n(r)},47907:function(e,t,s){"use strict";var r=s(15313);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},67447:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{getImageProps:function(){return n},default:function(){return c}});let r=s(84096),a=s(38630),i=s(81749),l=r._(s(10536)),n=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}},c=i.Image},4536:function(e,t,s){"use strict";s.r(t);var r=s(3827),a=s(64090),i=s(20703),l=s(8792),n=s(47907),c=s(69574),o=s(75879),d=s(18727);t.default=(0,c.Z)(function(){var e;let t=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[c,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),[f,j]=(0,a.useState)(null),[g,w]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),[N,y]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{(async()=>{try{if(p(!0),j(null),!s){j("Invalid search parameters");return}let e=s.get("userId");if(!e){j("No user ID provided");return}let r=await fetch("/api/auth/me"),a=await r.json();if(!a.isAuthenticated||!a.user){t.push("/login");return}let i=await fetch("/api/profiles/".concat(e));if(!i.ok){let e=await i.json();j(e.details||e.error||"Failed to fetch profile");return}let l=await i.json();if(!l||!l.user){j("Profile data is incomplete");return}u(l);let n=await fetch("/api/spotlight?userId=".concat(a.user.id,"&all=true"));if(n.ok){let t=await n.json();if(t.matches&&t.matches.length>0){let s=t.matches.sort((e,t)=>t.matchScore-e.matchScore)[0];if(s.profile.userId===e)y(!0),m({matchScore:s.matchScore,matchingCriteria:s.matchingCriteria});else{let s=t.matches.find(t=>t.profile.userId===e);s&&m({matchScore:s.matchScore,matchingCriteria:s.matchingCriteria})}}}v(!0);try{let t=await fetch("/api/ai/match-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.user.id,matchedUserId:e})});if(t.ok){let e=await t.json();w(e)}}catch(e){console.error("Error fetching AI analysis:",e)}finally{v(!1)}}catch(e){console.error("Error:",e),j(e instanceof Error?e.message:"Failed to fetch profile")}finally{p(!1)}})()},[t,s]),x)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[(0,r.jsx)("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),(0,r.jsx)("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),(0,r.jsx)("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading matches..."})]})]});if(f)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"No Match Found"}),(0,r.jsx)("p",{className:"text-purple-200 mb-6",children:f}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(l.default,{href:"/preferences",className:"inline-block w-full bg-purple-600 text-white px-6 py-3 rounded-md hover:bg-purple-700",children:"Update Preferences"}),(0,r.jsx)(l.default,{href:"/matches",className:"inline-block w-full border border-white/20 text-white px-6 py-3 rounded-md hover:bg-white/5",children:"Back to Matches"})]})]})});if(!c)return null;let k=new Date().getFullYear()-new Date(c.user.dob).getFullYear();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 py-12 relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"20%",left:"10%"}}),(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"60%",left:"80%"}}),(0,r.jsx)("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-sparkle",style:{top:"80%",left:"30%"}})]}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden border border-white/20",children:[(0,r.jsxs)("div",{className:"relative h-96",children:[(null===(e=c.user.photos)||void 0===e?void 0:e[0])?(0,r.jsx)(i.default,{src:c.user.photos[0].url,alt:"".concat(c.user.firstName,"'s profile"),fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"h-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("span",{className:"text-4xl font-bold text-white",children:[c.user.firstName[0],c.user.lastName[0]]})}),(0,r.jsx)("p",{className:"text-purple-200",children:"No photo available"})]})}),N&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-yellow-400 text-indigo-900 px-4 py-2 rounded-full font-semibold flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"w-5 h-5"}),"Best Match"]}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 ".concat(N?"bg-gradient-to-r from-purple-600 to-pink-600":"bg-purple-600"," text-white px-4 py-2 rounded-full font-medium"),children:[null==h?void 0:h.matchScore,"% Match"]})]}),c.user.photos&&c.user.photos.length>1&&(0,r.jsxs)("div",{className:"px-8 py-6 border-t border-white/10",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Photo Gallery"}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:c.user.photos.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-lg overflow-hidden bg-gradient-to-br from-purple-500/20 to-pink-500/20 shadow group flex flex-col",children:[(0,r.jsx)("div",{className:"relative w-full aspect-square",children:(0,r.jsx)(i.default,{src:e.url,alt:"Photo ".concat(t+1),fill:!0,className:"object-cover w-full h-full group-hover:scale-105 transition-transform duration-200",sizes:"300px"})}),e.caption&&(0,r.jsx)("div",{className:"p-2 text-center bg-white/10 backdrop-blur-sm",children:(0,r.jsx)("p",{className:"text-xs text-purple-200 truncate",children:e.caption})})]},t))})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:[c.user.firstName," ",c.user.lastName,", ",k]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:"Matching Criteria"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:null==h?void 0:h.matchingCriteria.map((e,t)=>(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-600/30 text-purple-200",children:e},t))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,r.jsxs)("dl",{className:"space-y-3",children:[c.height&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Height"}),(0,r.jsx)("dd",{className:"text-white",children:c.height})]}),c.weight&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Weight"}),(0,r.jsx)("dd",{className:"text-white",children:c.weight})]}),c.maritalStatus&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Marital Status"}),(0,r.jsx)("dd",{className:"text-white",children:c.maritalStatus})]}),c.religion&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Religion"}),(0,r.jsx)("dd",{className:"text-white",children:c.religion})]}),c.caste&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Caste"}),(0,r.jsx)("dd",{className:"text-white",children:c.caste})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Professional Information"}),(0,r.jsxs)("dl",{className:"space-y-3",children:[c.education&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Education"}),(0,r.jsx)("dd",{className:"text-white",children:c.education})]}),c.occupation&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Occupation"}),(0,r.jsx)("dd",{className:"text-white",children:c.occupation})]}),c.workLocation&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-purple-200",children:"Work Location"}),(0,r.jsx)("dd",{className:"text-white",children:c.workLocation})]})]})]})]}),c.aboutMe&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white mb-2",children:"About Me"}),(0,r.jsx)("p",{className:"text-purple-200",children:c.aboutMe})]}),(0,r.jsxs)("div",{className:"mt-8 p-6 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5 text-purple-200"}),"AI Match Analysis"]}),b?(0,r.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-200"})}):g?(0,r.jsx)("div",{className:"prose prose-invert max-w-none",children:(0,r.jsx)("div",{className:"whitespace-pre-line text-purple-200",children:g.analysis})}):(0,r.jsx)("p",{className:"text-purple-200",children:"Unable to generate analysis at this time."})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,r.jsx)(l.default,{href:"/matches",className:"px-4 py-2 border border-white/20 rounded-lg text-sm font-medium text-white hover:bg-white/5",children:"Back to Matches"}),(0,r.jsx)("button",{onClick:()=>{},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Show Interest"})]})]})]})})]})})},69574:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(3827),a=s(64090),i=s(47907);function l(e){return function(t){let[s,l]=(0,a.useState)(!0),[n,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null);return((0,i.useRouter)(),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();t.isAuthenticated&&t.user?(c(!0),d(t.user)):(c(!1),d(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup())}catch(e){console.error("Auth check error:",e),c(!1),d(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup()}finally{l(!1)}})()},[]),s)?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[(0,r.jsx)("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),(0,r.jsx)("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),(0,r.jsx)("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]}):n&&o?(0,r.jsx)(e,{...t,user:o}):null}}}},function(e){e.O(0,[1749,5250,2971,8069,1744],function(){return e(e.s=4766)}),_N_E=e.O()}]);