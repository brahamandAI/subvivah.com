(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{93033:function(e,r,l){Promise.resolve().then(l.bind(l,87e3))},57977:function(e,r,l){"use strict";l.d(r,{Z:function(){return c}});var t=l(64090);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,l)=>l?l.toUpperCase():r.toLowerCase()),s=e=>{let r=a(e);return r.charAt(0).toUpperCase()+r.slice(1)},i=function(){for(var e=arguments.length,r=Array(e),l=0;l<e;l++)r[l]=arguments[l];return r.filter((e,r,l)=>!!e&&""!==e.trim()&&l.indexOf(e)===r).join(" ").trim()},n=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,t.forwardRef)((e,r)=>{let{color:l="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:u="",children:c,iconNode:p,...h}=e;return(0,t.createElement)("svg",{ref:r,...d,width:o,height:o,stroke:l,strokeWidth:s?24*Number(a)/Number(o):a,className:i("lucide",u),...!c&&!n(h)&&{"aria-hidden":"true"},...h},[...p.map(e=>{let[r,l]=e;return(0,t.createElement)(r,l)}),...Array.isArray(c)?c:[c]])}),c=(e,r)=>{let l=(0,t.forwardRef)((l,a)=>{let{className:n,...d}=l;return(0,t.createElement)(u,{ref:a,iconNode:r,className:i("lucide-".concat(o(s(e))),"lucide-".concat(e),n),...d})});return l.displayName=s(e),l}},97336:function(e,r,l){"use strict";l.d(r,{Z:function(){return t}});let t=(0,l(57977).Z)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},52235:function(e,r,l){"use strict";l.d(r,{Z:function(){return t}});let t=(0,l(57977).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},24232:function(e,r,l){"use strict";l.d(r,{default:function(){return o.a}});var t=l(24930),o=l.n(t)},20703:function(e,r,l){"use strict";l.d(r,{default:function(){return o.a}});var t=l(67447),o=l.n(t)},47907:function(e,r,l){"use strict";var t=l(15313);l.o(t,"usePathname")&&l.d(r,{usePathname:function(){return t.usePathname}}),l.o(t,"useRouter")&&l.d(r,{useRouter:function(){return t.useRouter}}),l.o(t,"useSearchParams")&&l.d(r,{useSearchParams:function(){return t.useSearchParams}})},24930:function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let t=l(84096);l(3827),l(64090);let o=t._(l(84795));function a(e,r){let l={loading:e=>{let{error:r,isLoading:l,pastDelay:t}=e;return null}};return"function"==typeof e&&(l.loader=e),(0,o.default)({...l,...r})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},67447:function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var l in r)Object.defineProperty(e,l,{enumerable:!0,get:r[l]})}(r,{getImageProps:function(){return i},default:function(){return n}});let t=l(84096),o=l(38630),a=l(81749),s=t._(l(10536)),i=e=>{let{props:r}=(0,o.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,l]of Object.entries(r))void 0===l&&delete r[e];return{props:r}},n=a.Image},19721:function(e,r,l){"use strict";function t(e){let{reason:r,children:l}=e;return l}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return t}}),l(99775)},84795:function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n}});let t=l(3827),o=l(64090),a=l(19721);function s(e){var r;return{default:null!=(r=null==e?void 0:e.default)?r:e}}let i={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},n=function(e){let r={...i,...e},l=(0,o.lazy)(()=>r.loader().then(s)),n=r.loading;function d(e){let s=n?(0,t.jsx)(n,{isLoading:!0,pastDelay:!0,error:null}):null,i=r.ssr?(0,t.jsx)(l,{...e}):(0,t.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(l,{...e})});return(0,t.jsx)(o.Suspense,{fallback:s,children:i})}return d.displayName="LoadableComponent",d}},87e3:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return f},dynamic:function(){return p},revalidate:function(){return h}});var t=l(3827),o=l(64090),a=l(47907),s=l(69574),i=l(20703),n=l(97336);let d=(0,l(57977).Z)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var u=l(52235),c=l(24232);let p="force-dynamic",h=0,m=(0,c.default)(()=>Promise.all([l.e(7699),l.e(9323),l.e(9689),l.e(8218),l.e(9417)]).then(l.bind(l,9417)),{loadableGenerated:{webpack:()=>[9417]},ssr:!1});var f=(0,s.Z)(function(){var e,r,l,s,c,p,h,f,b;let[x,g]=(0,o.useState)(null),[v,j]=(0,o.useState)(!0),[y,w]=(0,o.useState)(!1),[N,k]=(0,o.useState)({height:"",weight:"",maritalStatus:"",religion:"",caste:"",motherTongue:"",education:"",occupation:"",annualIncome:"",workLocation:"",fatherName:"",fatherOccupation:"",motherName:"",motherOccupation:"",siblings:"",familyType:"",familyStatus:"",aboutMe:"",hobbies:""}),C=(0,a.useRouter)(),[P,S]=(0,o.useState)(!1),[O,L]=(0,o.useState)(null),[M,E]=(0,o.useState)(!1),[A,z]=(0,o.useState)(null),[_,I]=(0,o.useState)(""),[T,Z]=(0,o.useState)(!1),[U,W]=(0,o.useState)("idle"),[D,F]=(0,o.useState)(!1),[R,B]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{let r=await fetch("/api/auth/me");if(r.ok){var e;let l=await r.json();if(null===(e=l.user.profile)||void 0===e?void 0:e.hobbies)try{l.user.profile.hobbies=JSON.parse(l.user.profile.hobbies)}catch(e){l.user.profile.hobbies=[]}g(l.user),l.user.profile&&k({height:l.user.profile.height||"",weight:l.user.profile.weight||"",maritalStatus:l.user.profile.maritalStatus||"",religion:l.user.profile.religion||"",caste:l.user.profile.caste||"",motherTongue:l.user.profile.motherTongue||"",education:l.user.profile.education||"",occupation:l.user.profile.occupation||"",annualIncome:l.user.profile.annualIncome||"",workLocation:l.user.profile.workLocation||"",fatherName:l.user.profile.fatherName||"",fatherOccupation:l.user.profile.fatherOccupation||"",motherName:l.user.profile.motherName||"",motherOccupation:l.user.profile.motherOccupation||"",siblings:l.user.profile.siblings||"",familyType:l.user.profile.familyType||"",familyStatus:l.user.profile.familyStatus||"",aboutMe:l.user.profile.aboutMe||"",hobbies:Array.isArray(l.user.profile.hobbies)?l.user.profile.hobbies.join(", "):""})}}catch(e){console.error("Error fetching user:",e)}finally{j(!1)}})()},[]),(0,o.useEffect)(()=>(y?document.body.classList.add("edit-profile-modal-open"):document.body.classList.remove("edit-profile-modal-open"),()=>{document.body.classList.remove("edit-profile-modal-open")}),[y]);let V=e=>{let{name:r,value:l}=e.target;k(e=>({...e,[r]:l}))},G=async e=>{e.preventDefault();try{let e={...N,hobbies:N.hobbies?JSON.stringify(N.hobbies.split(",").map(e=>e.trim()).filter(Boolean)):null},r=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==x?void 0:x.id,...e})});if(r.ok){let e=await r.json();e.hobbies&&(e.hobbies=JSON.parse(e.hobbies)),g(r=>r?{...r,profile:e}:null),w(!1),alert("Profile updated successfully!")}else alert("Failed to update profile. Please try again.")}catch(e){console.error("Error updating profile:",e),alert("An error occurred while updating the profile.")}},H=async()=>{if(A){Z(!0),W("uploading");try{let e=new FormData;e.append("file",A),e.append("caption",_),e.append("isProfile","true");let r=await fetch("/api/photos/upload",{method:"POST",body:e}),l=await r.json();if(r.ok){W("success");let e=await fetch("/api/auth/me");if(e.ok){let r=await e.json();g(r.user)}E(!1),z(null),I("")}else W("error"),console.error("Upload failed:",l.error),alert(l.error||"Failed to upload photo. Please try again.")}catch(e){W("error"),console.error("Error uploading photo:",e),alert("An error occurred while uploading the photo. Please try again.")}finally{Z(!1)}}},J=async()=>{try{var e,r,l,t,o,a;F(!0);let s=await fetch("/api/generate-bio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==x?void 0:x.id,hobbies:(null==x?void 0:null===(e=x.profile)||void 0===e?void 0:e.hobbies)||[],education:null==x?void 0:null===(r=x.profile)||void 0===r?void 0:r.education,occupation:null==x?void 0:null===(l=x.profile)||void 0===l?void 0:l.occupation,maritalStatus:null==x?void 0:null===(t=x.profile)||void 0===t?void 0:t.maritalStatus,religion:null==x?void 0:null===(o=x.profile)||void 0===o?void 0:o.religion,workLocation:null==x?void 0:null===(a=x.profile)||void 0===a?void 0:a.workLocation})});if(s.ok){let e=await s.json();if(k(r=>({...r,aboutMe:e.bio})),!y){let r=await fetch("/api/profile/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==x?void 0:x.id,aboutMe:e.bio})});r.ok&&(await r.json(),g(r=>r?{...r,profile:{...r.profile,aboutMe:e.bio}}:null))}}else throw Error("Failed to generate bio")}catch(e){console.error("Error generating bio:",e),alert("Failed to generate bio. Please try again.")}finally{F(!1)}};if(v)return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[(0,t.jsx)("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),(0,t.jsx)("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),(0,t.jsx)("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]});if(!x)return null;let q=(null==x?void 0:null===(e=x.photos)||void 0===e?void 0:e.find(e=>e.isProfile))||(null==x?void 0:null===(r=x.photos)||void 0===r?void 0:r[0]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 py-8 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-4 right-8 animate-pulse text-amber-200 text-4xl z-10",children:"\uD83D\uDC64"}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-white/10 hover:bg-white/10 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Face Verification"}),(0,t.jsx)("p",{className:"text-gray-300 text-sm",children:"Verify your identity to increase your profile visibility"})]})]}),(0,t.jsxs)("button",{onClick:()=>B(!0),className:"px-6 py-2.5 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Verify Now"]})]})}),(0,t.jsx)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/10 hover:bg-white/10 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[(0,t.jsx)("div",{className:"flex-shrink-0 relative",children:(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-purple-400/20 shadow-lg cursor-pointer transition-transform duration-300 hover:scale-105",onClick:()=>{q&&(L({url:q.url}),S(!0))},children:q?(0,t.jsx)(i.default,{src:q.url,alt:"".concat(x.firstName,"'s profile"),width:160,height:160,className:"object-cover w-full h-full",priority:!0,unoptimized:!0}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-purple-400/20 to-pink-400/20 flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-4xl md:text-5xl font-bold text-white/70",children:[x.firstName[0],x.lastName[0]]})})}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 bg-purple-500/20 backdrop-blur-sm rounded-full p-2 shadow-md cursor-pointer hover:bg-purple-500/30 transition-colors border border-purple-400/30",children:[(0,t.jsx)("label",{htmlFor:"photo-upload",className:"cursor-pointer",children:(0,t.jsx)(n.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,t.jsx)("input",{type:"file",id:"photo-upload",className:"hidden",accept:"image/*",onChange:async e=>{var r;let l=null===(r=e.target.files)||void 0===r?void 0:r[0];if(l){z(l),Z(!0),W("uploading");try{let e=new FormData;e.append("file",l),e.append("isProfile","true");let r=await fetch("/api/photos/upload",{method:"POST",body:e});if(r.ok){W("success");let e=await fetch("/api/auth/me");if(e.ok){let r=await e.json();g(r.user)}}else{W("error");let e=await r.json();alert(e.error||"Failed to upload photo. Please try again.")}}catch(e){W("error"),console.error("Error uploading photo:",e),alert("An error occurred while uploading the photo. Please try again.")}finally{Z(!1),z(null)}}}})]})]})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[(0,t.jsxs)("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:[x.firstName," ",x.lastName]}),(0,t.jsx)("button",{onClick:()=>w(!0),className:"px-4 py-1.5 bg-purple-500/20 backdrop-blur-sm border border-purple-400/30 rounded-lg text-sm font-medium text-white hover:bg-purple-500/30 transition-colors w-fit",children:"Edit Profile"})]}),(0,t.jsx)("p",{className:"text-gray-300",children:x.email}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null===(l=x.profile)||void 0===l?void 0:l.maritalStatus)&&(0,t.jsx)("span",{className:"bg-purple-500/20 text-purple-200 px-3 py-1 rounded-full text-xs font-semibold border border-purple-400/30",children:x.profile.maritalStatus}),(null===(s=x.profile)||void 0===s?void 0:s.religion)&&(0,t.jsx)("span",{className:"bg-pink-500/20 text-pink-200 px-3 py-1 rounded-full text-xs font-semibold border border-pink-400/30",children:x.profile.religion}),(null===(c=x.profile)||void 0===c?void 0:c.education)&&(0,t.jsx)("span",{className:"bg-blue-500/20 text-blue-200 px-3 py-1 rounded-full text-xs font-semibold border border-blue-400/30",children:x.profile.education})]})]})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl shadow-sm p-6 border border-white/10 hover:bg-white/10 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-icons text-purple-300",children:"person"}),(0,t.jsx)("span",{className:"font-semibold text-white",children:"About Me"})]}),(0,t.jsxs)("button",{onClick:J,disabled:D,className:"px-3 py-1.5 bg-purple-500/20 text-purple-200 rounded-lg text-sm font-medium hover:bg-purple-500/30 transition-colors border border-purple-400/30 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed group",children:[(0,t.jsx)(d,{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-500"}),D?"Generating...":(null===(p=x.profile)||void 0===p?void 0:p.aboutMe)?"Regenerate Bio":"Generate Bio"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("p",{className:"text-gray-300 text-sm md:text-base leading-relaxed tracking-wide",children:(null===(h=x.profile)||void 0===h?void 0:h.aboutMe)||(0,t.jsxs)("span",{className:"text-gray-400",children:["Tell others about yourself by generating an AI-powered bio. Our AI will create a personalized description highlighting your education, career, interests, and what you're looking for in a partner.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),'Click the "Generate Bio" button above to get started!']})})})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl shadow-sm p-6 border border-white/10 hover:bg-white/10 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"material-icons text-purple-300",children:"photo_camera"}),(0,t.jsx)("span",{className:"font-semibold text-white",children:"Photo Gallery"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>E(!0),className:"px-3 py-1.5 bg-purple-500/20 text-white rounded-lg text-sm font-medium hover:bg-purple-500/30 transition-colors flex items-center gap-1.5 border border-purple-400/30",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4"}),"Add Photo"]}),(0,t.jsx)("button",{onClick:()=>C.push("/profile/photos"),className:"px-3 py-1.5 bg-purple-500/20 text-purple-200 rounded-lg text-sm font-medium hover:bg-purple-500/30 transition-colors border border-purple-400/30",children:"View All"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[null==x?void 0:null===(f=x.photos)||void 0===f?void 0:f.slice(0,3).map((e,r)=>(0,t.jsxs)("div",{className:"aspect-square rounded-lg overflow-hidden relative group border border-purple-400/30",children:[(0,t.jsx)(i.default,{src:e.url,alt:"Photo ".concat(r+1),width:150,height:150,className:"w-full h-full object-cover"}),e.caption&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:(0,t.jsx)("p",{className:"text-white text-xs truncate",children:e.caption})})]},r)),(!(null==x?void 0:x.photos)||x.photos.length<3)&&(0,t.jsxs)("div",{onClick:()=>E(!0),className:"aspect-square rounded-lg border-2 border-dashed border-purple-400/30 flex flex-col items-center justify-center cursor-pointer hover:bg-purple-500/20 transition-colors",children:[(0,t.jsx)(n.Z,{className:"w-6 h-6 text-purple-300 mb-1"}),(0,t.jsx)("span",{className:"text-purple-200 text-sm",children:"Add Photo"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl shadow-sm p-6 border border-white/10 hover:bg-white/10 transition-colors lg:col-span-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"material-icons text-purple-300",children:"favorite"}),(0,t.jsx)("span",{className:"font-semibold text-white",children:"Interests & Hobbies"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(null===(b=x.profile)||void 0===b?void 0:b.hobbies)&&Array.isArray(x.profile.hobbies)&&x.profile.hobbies.length>0?x.profile.hobbies.map((e,r)=>(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border "+(r%4==0?"bg-red-500/20 text-red-200 border-red-400/30":r%4==1?"bg-yellow-500/20 text-yellow-200 border-yellow-400/30":r%4==2?"bg-green-500/20 text-green-200 border-green-400/30":"bg-blue-500/20 text-blue-200 border-blue-400/30"),children:e},r)):(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"No hobbies added yet."})})]})]}),y&&(0,t.jsx)("div",{className:"edit-profile-modal fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-slate-950/95 via-purple-900/95 to-slate-950/95 backdrop-blur-lg rounded-2xl shadow-2xl p-6 w-full max-w-xl relative max-h-[90vh] overflow-y-auto border border-purple-400/30",children:[(0,t.jsx)("button",{className:"close-btn absolute top-6 left-6 p-3 rounded-full bg-purple-600 hover:bg-purple-700 transition-all duration-300 transform hover:scale-110 shadow-lg border-2 border-purple-400/30 group z-50",onClick:()=>w(!1),children:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-white group-hover:rotate-90 transition-transform duration-300"})}),(0,t.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-purple-100",children:"Edit Your Profile"}),(0,t.jsx)("p",{className:"text-purple-200/70 mt-1",children:"Update your personal information"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-slate-950/50 backdrop-blur-sm rounded-xl p-5 border border-purple-500/20 shadow-lg hover:shadow-purple-500/5 transition-all duration-300",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-100 mb-4",children:"Personal Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Height (cm)"}),(0,t.jsx)("input",{type:"number",name:"height",value:N.height,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your height"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Weight (kg)"}),(0,t.jsx)("input",{type:"number",name:"weight",value:N.weight,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your weight"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Marital Status"}),(0,t.jsxs)("select",{name:"maritalStatus",value:N.maritalStatus,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",children:[(0,t.jsx)("option",{value:"",children:"Select"}),(0,t.jsx)("option",{value:"Never Married",children:"Never Married"}),(0,t.jsx)("option",{value:"Divorced",children:"Divorced"}),(0,t.jsx)("option",{value:"Widowed",children:"Widowed"}),(0,t.jsx)("option",{value:"Awaiting Divorce",children:"Awaiting Divorce"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Religion"}),(0,t.jsx)("input",{type:"text",name:"religion",value:N.religion,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your religion"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Caste"}),(0,t.jsx)("input",{type:"text",name:"caste",value:N.caste,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your caste"})]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-950/50 backdrop-blur-sm rounded-xl p-5 border border-purple-500/20 shadow-lg hover:shadow-purple-500/5 transition-all duration-300",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-100 mb-4",children:"Family Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Father's Name"}),(0,t.jsx)("input",{type:"text",name:"fatherName",value:N.fatherName,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your father's name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Father's Occupation"}),(0,t.jsx)("input",{type:"text",name:"fatherOccupation",value:N.fatherOccupation,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your father's occupation"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Mother's Name"}),(0,t.jsx)("input",{type:"text",name:"motherName",value:N.motherName,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your mother's name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Mother's Occupation"}),(0,t.jsx)("input",{type:"text",name:"motherOccupation",value:N.motherOccupation,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your mother's occupation"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-slate-950/50 backdrop-blur-sm rounded-xl p-5 border border-purple-500/20 shadow-lg hover:shadow-purple-500/5 transition-all duration-300",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-100 mb-4",children:"Professional Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Education"}),(0,t.jsx)("input",{type:"text",name:"education",value:N.education,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your education"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Occupation"}),(0,t.jsx)("input",{type:"text",name:"occupation",value:N.occupation,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your occupation"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Annual Income"}),(0,t.jsx)("input",{type:"number",name:"annualIncome",value:N.annualIncome,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your annual income"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Work Location"}),(0,t.jsx)("input",{type:"text",name:"workLocation",value:N.workLocation,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter your work location"})]})]})]}),(0,t.jsxs)("div",{className:"bg-slate-950/50 backdrop-blur-sm rounded-xl p-5 border border-purple-500/20 shadow-lg hover:shadow-purple-500/5 transition-all duration-300",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-100 mb-4",children:"About Me"}),(0,t.jsx)("textarea",{name:"aboutMe",value:N.aboutMe,onChange:V,rows:3,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Tell us about yourself..."})]}),(0,t.jsxs)("div",{className:"bg-slate-950/50 backdrop-blur-sm rounded-xl p-5 border border-purple-500/20 shadow-lg hover:shadow-purple-500/5 transition-all duration-300",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-100 mb-4",children:"Hobbies & Interests"}),(0,t.jsx)("input",{type:"text",name:"hobbies",value:N.hobbies,onChange:V,className:"mt-1 block w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",placeholder:"Enter hobbies separated by commas"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 mt-8 pt-4 border-t border-purple-500/20",children:[(0,t.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-6 py-2.5 text-sm font-medium text-purple-200 bg-purple-500/20 rounded-lg hover:bg-purple-500/30 transition-all duration-300 border border-purple-400/30 hover:shadow-lg transform hover:-translate-y-0.5",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2.5 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all duration-300 hover:shadow-lg transform hover:-translate-y-0.5 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-purple-900",children:"Save Changes"})]})]})]})}),P&&O&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",onClick:()=>S(!1),children:(0,t.jsxs)("div",{className:"relative max-w-2xl w-full flex items-center justify-center",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{className:"absolute top-2 right-2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-80 z-10",onClick:()=>S(!1),children:(0,t.jsx)(u.Z,{className:"w-6 h-6"})}),(0,t.jsx)(i.default,{src:O.url,alt:"Full Profile Photo",width:600,height:600,className:"rounded-2xl object-contain max-h-[80vh] max-w-full",unoptimized:!0})]})}),M&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-slate-950/95 via-purple-900/95 to-slate-950/95 backdrop-blur-lg rounded-2xl p-6 w-full max-w-md border border-purple-400/30",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-purple-100",children:"Upload Photo"}),(0,t.jsx)("button",{onClick:()=>E(!1),className:"text-purple-200 hover:text-purple-100 transition-colors",children:(0,t.jsx)(u.Z,{className:"w-6 h-6"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"border-2 border-dashed border-purple-400/30 rounded-lg p-6 text-center bg-slate-900/30",children:A?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"relative w-[200px] h-[200px] mx-auto",children:(0,t.jsx)(i.default,{src:URL.createObjectURL(A),alt:"Preview",fill:!0,className:"rounded-lg object-cover",sizes:"200px"})}),(0,t.jsx)("p",{className:"text-sm text-purple-200",children:A.name})]}):(0,t.jsxs)("label",{className:"cursor-pointer",children:[(0,t.jsx)(n.Z,{className:"w-12 h-12 text-purple-300 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-purple-200",children:"Click to select a photo"}),(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{var r;let l=null===(r=e.target.files)||void 0===r?void 0:r[0];l&&z(l)}})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-purple-200 mb-1.5",children:"Caption"}),(0,t.jsx)("textarea",{value:_,onChange:e=>I(e.target.value),className:"w-full rounded-lg bg-slate-900/50 border-purple-500/30 text-purple-100 placeholder-purple-300/30 shadow-inner focus:border-purple-500 focus:ring focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200",rows:3,placeholder:"Add a caption to your photo..."})]}),"uploading"===U&&(0,t.jsx)("div",{className:"text-center text-purple-300 my-2",children:"Uploading..."}),"success"===U&&(0,t.jsx)("div",{className:"text-center text-green-400 my-2",children:"Upload successful!"}),"error"===U&&(0,t.jsx)("div",{className:"text-center text-red-400 my-2",children:"Upload failed. Please try again."}),(0,t.jsx)("button",{onClick:H,disabled:!A||T,className:"w-full py-2.5 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:shadow-lg transform hover:-translate-y-0.5",children:T?"Uploading...":"Upload Photo"})]})]})}),R&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>B(!1)}),(0,t.jsx)("div",{className:"relative z-10 w-full max-w-2xl",children:(0,t.jsx)(m,{onNext:e=>{B(!1),console.log("Verification completed:",e)}})})]})]})]})})},69574:function(e,r,l){"use strict";l.d(r,{Z:function(){return s}});var t=l(3827),o=l(64090),a=l(47907);function s(e){return function(r){let[l,s]=(0,o.useState)(!0),[i,n]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null);return((0,a.useRouter)(),(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me"),r=await e.json();r.isAuthenticated&&r.user?(n(!0),u(r.user)):(n(!1),u(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup())}catch(e){console.error("Auth check error:",e),n(!1),u(null),"function"==typeof window.showLoginPopup&&window.showLoginPopup()}finally{s(!1)}})()},[]),l)?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-900 to-indigo-950 flex items-center justify-center relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 backdrop-blur-md z-0"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center",children:[(0,t.jsxs)("svg",{className:"animate-spin h-14 w-14 text-purple-300 mb-4",viewBox:"0 0 50 50",children:[(0,t.jsx)("circle",{className:"opacity-20",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none"}),(0,t.jsx)("circle",{className:"opacity-70",cx:"25",cy:"25",r:"20",stroke:"currentColor",strokeWidth:"5",fill:"none",strokeDasharray:"31.4 94.2"})]}),(0,t.jsx)("span",{className:"text-purple-200 text-lg font-medium animate-pulse",children:"Loading..."})]})]}):i&&d?(0,t.jsx)(e,{...r,user:d}):null}}}},function(e){e.O(0,[1749,2971,8069,1744],function(){return e(e.s=93033)}),_N_E=e.O()}]);